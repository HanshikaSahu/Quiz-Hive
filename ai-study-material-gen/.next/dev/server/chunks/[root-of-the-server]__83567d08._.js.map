{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KIIT0001/QuizHive/ai-study-material-gen/app/api/check-user/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { db } from \"../configs/db\";\r\nimport { USER_TABLE } from \"@/configs/schema\";\r\nimport { eq } from \"drizzle-orm\";\r\n\r\nexport async function POST(req) {\r\n  try {\r\n    const { email, name } = await req.json();\r\n\r\n    // check if user exists\r\n    const result = await db\r\n      .select()\r\n      .from(USER_TABLE)\r\n      .where(eq(USER_TABLE.email, email));\r\n\r\n    if (result.length === 0) {\r\n      // insert new user\r\n      await db.insert(USER_TABLE).values({\r\n        name,\r\n        email,\r\n      });\r\n    }\r\n\r\n    return NextResponse.json({ ok: true });\r\n  } catch (err) {\r\n    console.error(err);\r\n    return NextResponse.json({ error: err.message }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;;;;;;AAGA;;;;;AAEO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI;QAEtC,uBAAuB;QACvB,MAAM,SAAS,MAAM,GAClB,MAAM,GACN,IAAI,CAAC,YACL,KAAK,CAAC,IAAA,0KAAE,EAAC,WAAW,KAAK,EAAE;QAE9B,IAAI,OAAO,MAAM,KAAK,GAAG;YACvB,kBAAkB;YAClB,MAAM,GAAG,MAAM,CAAC,YAAY,MAAM,CAAC;gBACjC;gBACA;YACF;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAK;IACtC,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACjE;AACF"}}]
}