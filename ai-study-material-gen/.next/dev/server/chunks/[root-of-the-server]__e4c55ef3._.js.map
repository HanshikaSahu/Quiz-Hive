{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KIIT0001/QuizHive/ai-study-material-gen/configs/db.js"],"sourcesContent":["import { drizzle } from \"drizzle-orm/neon-http\";\r\nimport { neon } from \"@neondatabase/serverless\";\r\n\r\nconst sql = neon(process.env.DATABASE_URL); // server env, not NEXT_PUBLIC\r\n\r\nexport const db = drizzle(sql);"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,MAAM,IAAA,gKAAI,EAAC,QAAQ,GAAG,CAAC,YAAY,GAAG,8BAA8B;AAEnE,MAAM,KAAK,IAAA,qKAAO,EAAC"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KIIT0001/QuizHive/ai-study-material-gen/configs/schema.js"],"sourcesContent":["import { pgTable, serial, text, boolean, varchar } from \"drizzle-orm/pg-core\";\r\n\r\nexport const USER_TABLE = pgTable(\"users\", {\r\n  id: serial(\"id\").primaryKey(),\r\n  name: varchar(\"name\", { length: 100 }).notNull(),\r\n  email: varchar(\"email\", { length: 255 }).notNull(),\r\n  isMember: boolean(\"is_member\").default(false),\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;;AAEO,MAAM,aAAa,IAAA,kKAAO,EAAC,SAAS;IACzC,IAAI,IAAA,6KAAM,EAAC,MAAM,UAAU;IAC3B,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAI,GAAG,OAAO;IAC9C,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI,GAAG,OAAO;IAChD,UAAU,IAAA,+KAAO,EAAC,aAAa,OAAO,CAAC;AACzC"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KIIT0001/QuizHive/ai-study-material-gen/app/api/check-user/route.js"],"sourcesContent":["// app/api/check-user/route.js\r\nimport { NextResponse } from \"next/server\";\r\n// route file is at: app/api/check-user/route.js\r\n// go up to project root and import configs/db and schema\r\nimport { db } from \"../../../configs/db\";\r\nimport { USER_TABLE } from \"../../../configs/schema\";\r\nimport { eq } from \"drizzle-orm\";\r\n\r\nexport async function POST(req) {\r\n  try {\r\n    const { email, name } = await req.json();\r\n\r\n    if (!email) {\r\n      return NextResponse.json({ error: \"missing email\" }, { status: 400 });\r\n    }\r\n\r\n    // check if user exists\r\n    const existing = await db\r\n      .select()\r\n      .from(USER_TABLE)\r\n      .where(eq(USER_TABLE.email, email));\r\n\r\n    if (!existing || existing.length === 0) {\r\n      // insert new user\r\n      await db.insert(USER_TABLE).values({\r\n        name: name ?? null,\r\n        email,\r\n      });\r\n    }\r\n\r\n    return NextResponse.json({ ok: true });\r\n  } catch (err) {\r\n    console.error(\"check-user error:\", err);\r\n    return NextResponse.json({ error: err?.message ?? \"server error\" }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;AAC9B;AACA,gDAAgD;AAChD,yDAAyD;AACzD;AACA;AACA;;;;;AAEO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI;QAEtC,IAAI,CAAC,OAAO;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAgB,GAAG;gBAAE,QAAQ;YAAI;QACrE;QAEA,uBAAuB;QACvB,MAAM,WAAW,MAAM,qHAAE,CACtB,MAAM,GACN,IAAI,CAAC,iIAAU,EACf,KAAK,CAAC,IAAA,0KAAE,EAAC,iIAAU,CAAC,KAAK,EAAE;QAE9B,IAAI,CAAC,YAAY,SAAS,MAAM,KAAK,GAAG;YACtC,kBAAkB;YAClB,MAAM,qHAAE,CAAC,MAAM,CAAC,iIAAU,EAAE,MAAM,CAAC;gBACjC,MAAM,QAAQ;gBACd;YACF;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAK;IACtC,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,KAAK,WAAW;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpF;AACF"}}]
}